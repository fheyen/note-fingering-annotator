(this["webpackJsonpnote-fingering-annotator"]=this["webpackJsonpnote-fingering-annotator"]||[]).push([[0],{22:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(2),r=n.n(a),s=n(11),c=n.n(s),o=n(5),l=n(6),d=n(8),u=n(7),h=(n(22),n(12)),f=n.n(h),j=n(13),p=n(14),b=n(3),m=n(15),g=(n(28),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).download=function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},i.updateFinger=function(e,t){var n=i.state.fingers,a=Object(m.a)(n);a[e]=t,i.setState({fingers:a})},i.downloadFingering=function(){var e=i.props.fileName,t=i.state.fingers,n=JSON.stringify(t);i.download(n,"".concat(e,".json"))},i.state={fingers:[]},i}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){e.notes!==this.props.notes&&this.setState({fingers:new Array(this.props.notes.length).fill(null)})}},{key:"render",value:function(){var e=this,t=this.props.notes;return Object(i.jsxs)("div",{className:"Annotator",children:[Object(i.jsx)("button",{onClick:this.downloadFingering,children:"Download"}),Object(i.jsx)("div",{className:"notes",children:t.map((function(t,n){return Object(i.jsxs)("div",{className:"note",children:[Object(i.jsxs)("div",{children:[b.Midi.getMidiNoteByNr(t.pitch).label," ",t.pitch]}),void 0!==t.string&&void 0!==t.fret&&Object(i.jsxs)("div",{children:["String: ",t.string," Fret: ",t.fret]}),Object(i.jsxs)("div",{children:["Time: ",t.start.toFixed(1)," - ",t.end.toFixed(1)]}),Object(i.jsx)("div",{children:Object(i.jsx)("input",{type:"text",placeholder:"Insert finger number...",onChange:function(t){return e.updateFinger(n,+t.target.value)}})})]})}))})]})}}]),n}(a.PureComponent)),v=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).loadMusicXml=function(e){var t=new FileReader;t.onload=function(){var n=(new DOMParser).parseFromString(t.result,"text/xml"),a=Object(b.preprocessMusicXmlData)(n).parts.map((function(e){return e.noteObjs}));i.setState({noteTracks:a,selectedTrack:0,notes:a[0],fileName:e.target.files[0].name})},t.readAsText(e.target.files[0])},i.handleSelectTrack=function(e){var t=+e.target.value;i.setState({selectedTrack:t,notes:i.state.noteTracks[t]})},i.onResize=function(){i.setState({viewSize:{outerWidth:Math.floor(window.innerWidth-20),outerHeight:Math.floor(window.innerHeight-200)}})},i.state={viewSize:{outerWidth:800,outerHeight:600},noteTracks:[],notes:[],selectedTrack:0,fileName:""},i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize,!1),this.onResize();var e=document.getElementById("filereader"),t=this;f.a.parse(e,(function(n){try{var i=Object(b.preprocessMidiFileData)(n).parts.map((function(e){return e.noteObjs}));t.setState({noteTracks:i,selectedTrack:0,notes:i[0],fileName:e.files[0].name})}catch(a){alert("Invalid MIDI file or wrong format!")}}))}},{key:"render",value:function(){var e=this.state;return Object(i.jsxs)("div",{className:"App dark",children:[Object(i.jsxs)("div",{className:"fileSelection",children:[Object(i.jsxs)("label",{children:["Select MIDI file",Object(i.jsx)("input",{className:"fileInput",type:"file",id:"filereader",accept:".mid,.midi"})]}),Object(i.jsxs)("label",{children:["Select MusicXML file",Object(i.jsx)("input",{className:"fileInput",type:"file",accept:".xml,.musicxml",onChange:this.loadMusicXml})]}),Object(i.jsxs)("label",{children:["Select a track",Object(i.jsx)("select",{onChange:this.handleSelectTrack,defaultValue:e.selectedTrack,children:e.noteTracks.map((function(e,t){return Object(i.jsxs)("option",{value:t,children:["Track ",t," (",e.length," notes)"]},t)}))})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)(g,{notes:e.notes,fileName:e.fileName})}),Object(i.jsx)("div",{className:"githubLink",children:Object(i.jsxs)("a",{href:"https://github.com/fheyen/note-fingering-annotator",children:[Object(i.jsx)(j.a,{icon:p.a}),"\xa0 https://github.com/fheyen/note-fingering-annotator"]})})]})}}]),n}(a.Component);c.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(v,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.5bad47d4.chunk.js.map